# yaml-language-server: $schema=../../recipe.schema.json

title: Subscriptions
image: null
description: |
  This recipe adds subscription capabilities to your Hydrogen storefront by implementing [selling plan groups](https://shopify.dev/docs/api/storefront/latest/objects/SellingPlanGroup) and options. Customers can choose between one-time purchases or recurring subscriptions when available.

  The implementation:
  1. Modifies product detail pages to display subscription options with accurate pricing
  2. Adds a SellingPlanSelector component that presents available subscription options
  3. Enhances GraphQL fragments to fetch all necessary selling plan data
  4. Displays subscription details on applicable cart line items
  With this recipe, merchants can offer flexible purchasing options while maintaining a seamless customer experience.
notes: []
deletedFiles: []
ingredients: []
steps:
  - type: INFO
    name: Requirements
    description: >
      This recipe comes pre-configured for our demo storefront using an example
      subscription product with the handle `shopify-wax`.

      #### Setting Up in Your Own Store

      To implement subscriptions in your store:

      1. Install a [Shopify
      Subscriptions](https://apps.shopify.com/shopify-subscriptions) app

      2. Use the app to create selling plans for your products

      3. Assign these selling plans to any products you want to offer as
      subscriptions
  - type: PATCH
    name: Render the selling plan in the cart
    description: >
      CartLineItem now displays subscription plan names when customers add
      subscription products to their cart.
    diffs:
      - file: app/components/CartLineItem.tsx
        patchFile: CartLineItem.tsx.f93ff4.patch
  - type: PATCH
    name: app/components/ProductForm.tsx
    description: null
    diffs:
      - file: app/components/ProductForm.tsx
        patchFile: ProductForm.tsx.252e88.patch
  - type: PATCH
    name: app/components/ProductPrice.tsx
    description: null
    diffs:
      - file: app/components/ProductPrice.tsx
        patchFile: ProductPrice.tsx.49f564.patch
  - type: PATCH
    name: Add Selling Plan Data to Cart Queries
    description: >
      Updates cart GraphQL fragments to include subscription plan names,
      enabling e.g "Subscribe and save" messaging in the applicable cart lines
    diffs:
      - file: app/lib/fragments.ts
        patchFile: fragments.ts.18726b.patch
  - type: PATCH
    name: Add SellingPlanSelector to product pages
    description: >
      Adds SellingPlanSelector component to display subscription options on
      product pages. Handles pricing adjustments, maintains selection state via
      URL parameters, and updates add-to-cart functionality. Fetches
      subscription data through the updated cart GraphQL fragments.
    diffs:
      - file: app/routes/products.$handle.tsx
        patchFile: products.$handle.tsx.7addea.patch
commit: cd76a0df1a585b9e3f6e615bc2cb67c39a3e7a76
