// tsup.config.ts
import path from "node:path";
import { rmSync } from "node:fs";
import { cp as copy } from "node:fs/promises";
import { defineConfig } from "tsup";

// src/lib/process.ts
import { exec } from "node:child_process";
import { promisify } from "node:util";
var execAsync = promisify(exec);

// src/lib/build.ts
import { fileURLToPath } from "node:url";
import { findPathUp } from "@shopify/cli-kit/node/fs";
import { AbortError } from "@shopify/cli-kit/node/error";
import { dirname, joinPath } from "@shopify/cli-kit/node/path";
var __injected_import_meta_url__ = "file:///Users/juanp.prieto/github.com/Shopify/hydrogen/packages/cli/src/lib/build.ts";
var monorepoPackagesPath = new URL("../../..", __injected_import_meta_url__).pathname;
var isHydrogenMonorepo = monorepoPackagesPath.endsWith(
  "/hydrogen/packages/"
);
var ASSETS_DIR_PREFIX = "assets/hydrogen";
var ASSETS_STARTER_DIR = "starter";
function getSkeletonSourceDir() {
  if (!isHydrogenMonorepo) {
    throw new AbortError(
      "Trying to use skeleton source dir outside of Hydrogen monorepo.",
      "Please report this error."
    );
  }
  return joinPath(dirname(monorepoPackagesPath), "templates", "skeleton");
}

// tsup.config.ts
rmSync("./dist", { recursive: true, force: true });
var commonConfig = defineConfig({
  format: "esm",
  minify: false,
  bundle: false,
  splitting: true,
  treeshake: true,
  sourcemap: false,
  clean: false
  // Avoid deleting the assets folder
});
var outDir = "dist";
var tsup_config_default = defineConfig([
  {
    ...commonConfig,
    entry: ["src/**/*.ts", "!src/**/*.test.ts"],
    outDir,
    // Generate types only for the exposed entry points
    dts: { entry: ["src/index.ts", "src/commands/hydrogen/init.ts"] },
    async onSuccess() {
      await copy(path.resolve("assets"), path.join(outDir, ASSETS_DIR_PREFIX), {
        recursive: true,
        force: true
      });
      const starterOutDir = path.join(
        outDir,
        ASSETS_DIR_PREFIX,
        ASSETS_STARTER_DIR
      );
      await copy(getSkeletonSourceDir(), starterOutDir, {
        force: true,
        recursive: true,
        filter: (filepath) => !/node_modules|\.shopify|\.cache|\.turbo|build|dist/gi.test(filepath)
      });
      console.log(
        "\n",
        "Copied skeleton template files to build directory",
        "\n"
      );
      console.log("\n", "Generating Oclif manifest...");
      await execAsync("node ./scripts/generate-manifest.mjs");
      console.log("", "Oclif manifest generated.\n");
    }
  },
  {
    ...commonConfig,
    // TODO remove virtual routes copy when deprecating classic compiler
    entry: ["../hydrogen/src/vite/virtual-routes/**/*.tsx"],
    outDir: `${outDir}/${ASSETS_DIR_PREFIX}/virtual-routes`,
    outExtension: () => ({ js: ".jsx" }),
    dts: false,
    async onSuccess() {
      await copy(
        "../hydrogen/src/vite/virtual-routes/assets",
        `${outDir}/${ASSETS_DIR_PREFIX}/virtual-routes/assets`,
        { recursive: true, force: true }
      );
      console.log("\n", "Copied virtual route assets to build directory", "\n");
    }
  }
]);
export {
  tsup_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidHN1cC5jb25maWcudHMiLCAic3JjL2xpYi9wcm9jZXNzLnRzIiwgInNyYy9saWIvYnVpbGQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9faW5qZWN0ZWRfZmlsZW5hbWVfXyA9IFwiL1VzZXJzL2p1YW5wLnByaWV0by9naXRodWIuY29tL1Nob3BpZnkvaHlkcm9nZW4vcGFja2FnZXMvY2xpL3RzdXAuY29uZmlnLnRzXCI7Y29uc3QgX19pbmplY3RlZF9kaXJuYW1lX18gPSBcIi9Vc2Vycy9qdWFucC5wcmlldG8vZ2l0aHViLmNvbS9TaG9waWZ5L2h5ZHJvZ2VuL3BhY2thZ2VzL2NsaVwiO2NvbnN0IF9faW5qZWN0ZWRfaW1wb3J0X21ldGFfdXJsX18gPSBcImZpbGU6Ly8vVXNlcnMvanVhbnAucHJpZXRvL2dpdGh1Yi5jb20vU2hvcGlmeS9oeWRyb2dlbi9wYWNrYWdlcy9jbGkvdHN1cC5jb25maWcudHNcIjtpbXBvcnQgcGF0aCBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHtybVN5bmN9IGZyb20gJ25vZGU6ZnMnO1xuaW1wb3J0IHtjcCBhcyBjb3B5fSBmcm9tICdub2RlOmZzL3Byb21pc2VzJztcbmltcG9ydCB7ZGVmaW5lQ29uZmlnfSBmcm9tICd0c3VwJztcbmltcG9ydCB7ZXhlY0FzeW5jfSBmcm9tICcuL3NyYy9saWIvcHJvY2Vzcyc7XG5pbXBvcnQge1xuICBBU1NFVFNfRElSX1BSRUZJWCxcbiAgQVNTRVRTX1NUQVJURVJfRElSLFxuICBnZXRTa2VsZXRvblNvdXJjZURpcixcbn0gZnJvbSAnLi9zcmMvbGliL2J1aWxkJztcblxuLy8gQ2xlYW51cCBkaXN0IGZvbGRlciBiZWZvcmUgYnVpZC9kZXYuXG5ybVN5bmMoJy4vZGlzdCcsIHtyZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlfSk7XG5cbmNvbnN0IGNvbW1vbkNvbmZpZyA9IGRlZmluZUNvbmZpZyh7XG4gIGZvcm1hdDogJ2VzbScsXG4gIG1pbmlmeTogZmFsc2UsXG4gIGJ1bmRsZTogZmFsc2UsXG4gIHNwbGl0dGluZzogdHJ1ZSxcbiAgdHJlZXNoYWtlOiB0cnVlLFxuICBzb3VyY2VtYXA6IGZhbHNlLFxuICBjbGVhbjogZmFsc2UsIC8vIEF2b2lkIGRlbGV0aW5nIHRoZSBhc3NldHMgZm9sZGVyXG59KTtcblxuY29uc3Qgb3V0RGlyID0gJ2Rpc3QnO1xuXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoW1xuICB7XG4gICAgLi4uY29tbW9uQ29uZmlnLFxuICAgIGVudHJ5OiBbJ3NyYy8qKi8qLnRzJywgJyFzcmMvKiovKi50ZXN0LnRzJ10sXG4gICAgb3V0RGlyLFxuICAgIC8vIEdlbmVyYXRlIHR5cGVzIG9ubHkgZm9yIHRoZSBleHBvc2VkIGVudHJ5IHBvaW50c1xuICAgIGR0czoge2VudHJ5OiBbJ3NyYy9pbmRleC50cycsICdzcmMvY29tbWFuZHMvaHlkcm9nZW4vaW5pdC50cyddfSxcbiAgICBhc3luYyBvblN1Y2Nlc3MoKSB7XG4gICAgICAvLyBDb3B5IGFzc2V0cyB0ZW1wbGF0ZXNcbiAgICAgIGF3YWl0IGNvcHkocGF0aC5yZXNvbHZlKCdhc3NldHMnKSwgcGF0aC5qb2luKG91dERpciwgQVNTRVRTX0RJUl9QUkVGSVgpLCB7XG4gICAgICAgIHJlY3Vyc2l2ZTogdHJ1ZSxcbiAgICAgICAgZm9yY2U6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgLy8gVGhlc2UgZmlsZXMgbmVlZCB0byBiZSBwYWNrYWdlZC9kaXN0cmlidXRlZCB3aXRoIHRoZSBDTElcbiAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSBgZ2VuZXJhdGVgIGNvbW1hbmQuXG4gICAgICBjb25zdCBzdGFydGVyT3V0RGlyID0gcGF0aC5qb2luKFxuICAgICAgICBvdXREaXIsXG4gICAgICAgIEFTU0VUU19ESVJfUFJFRklYLFxuICAgICAgICBBU1NFVFNfU1RBUlRFUl9ESVIsXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBjb3B5KGdldFNrZWxldG9uU291cmNlRGlyKCksIHN0YXJ0ZXJPdXREaXIsIHtcbiAgICAgICAgZm9yY2U6IHRydWUsXG4gICAgICAgIHJlY3Vyc2l2ZTogdHJ1ZSxcbiAgICAgICAgZmlsdGVyOiAoZmlsZXBhdGg6IHN0cmluZykgPT5cbiAgICAgICAgICAhL25vZGVfbW9kdWxlc3xcXC5zaG9waWZ5fFxcLmNhY2hlfFxcLnR1cmJvfGJ1aWxkfGRpc3QvZ2kudGVzdChmaWxlcGF0aCksXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICdcXG4nLFxuICAgICAgICAnQ29waWVkIHNrZWxldG9uIHRlbXBsYXRlIGZpbGVzIHRvIGJ1aWxkIGRpcmVjdG9yeScsXG4gICAgICAgICdcXG4nLFxuICAgICAgKTtcblxuICAgICAgY29uc29sZS5sb2coJ1xcbicsICdHZW5lcmF0aW5nIE9jbGlmIG1hbmlmZXN0Li4uJyk7XG4gICAgICBhd2FpdCBleGVjQXN5bmMoJ25vZGUgLi9zY3JpcHRzL2dlbmVyYXRlLW1hbmlmZXN0Lm1qcycpO1xuICAgICAgY29uc29sZS5sb2coJycsICdPY2xpZiBtYW5pZmVzdCBnZW5lcmF0ZWQuXFxuJyk7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIC4uLmNvbW1vbkNvbmZpZyxcbiAgICAvLyBUT0RPIHJlbW92ZSB2aXJ0dWFsIHJvdXRlcyBjb3B5IHdoZW4gZGVwcmVjYXRpbmcgY2xhc3NpYyBjb21waWxlclxuICAgIGVudHJ5OiBbJy4uL2h5ZHJvZ2VuL3NyYy92aXRlL3ZpcnR1YWwtcm91dGVzLyoqLyoudHN4J10sXG4gICAgb3V0RGlyOiBgJHtvdXREaXJ9LyR7QVNTRVRTX0RJUl9QUkVGSVh9L3ZpcnR1YWwtcm91dGVzYCxcbiAgICBvdXRFeHRlbnNpb246ICgpID0+ICh7anM6ICcuanN4J30pLFxuICAgIGR0czogZmFsc2UsXG4gICAgYXN5bmMgb25TdWNjZXNzKCkge1xuICAgICAgLy8gRm9yIHNvbWUgcmVhc29uLCBpdCBzZWVtcyB0aGF0IHB1YmxpY0RpciA9PiBvdXREaXIgbWlnaHQgYmUgc2tpcHBlZCBvbiBDSSxcbiAgICAgIC8vIHNvIGVuc3VyZSBoZXJlIHRoYXQgYXNzZXQgZmlsZXMgYXJlIGNvcGllZDpcbiAgICAgIGF3YWl0IGNvcHkoXG4gICAgICAgICcuLi9oeWRyb2dlbi9zcmMvdml0ZS92aXJ0dWFsLXJvdXRlcy9hc3NldHMnLFxuICAgICAgICBgJHtvdXREaXJ9LyR7QVNTRVRTX0RJUl9QUkVGSVh9L3ZpcnR1YWwtcm91dGVzL2Fzc2V0c2AsXG4gICAgICAgIHtyZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlfSxcbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdcXG4nLCAnQ29waWVkIHZpcnR1YWwgcm91dGUgYXNzZXRzIHRvIGJ1aWxkIGRpcmVjdG9yeScsICdcXG4nKTtcbiAgICB9LFxuICB9LFxuXSk7XG4iLCAiY29uc3QgX19pbmplY3RlZF9maWxlbmFtZV9fID0gXCIvVXNlcnMvanVhbnAucHJpZXRvL2dpdGh1Yi5jb20vU2hvcGlmeS9oeWRyb2dlbi9wYWNrYWdlcy9jbGkvc3JjL2xpYi9wcm9jZXNzLnRzXCI7Y29uc3QgX19pbmplY3RlZF9kaXJuYW1lX18gPSBcIi9Vc2Vycy9qdWFucC5wcmlldG8vZ2l0aHViLmNvbS9TaG9waWZ5L2h5ZHJvZ2VuL3BhY2thZ2VzL2NsaS9zcmMvbGliXCI7Y29uc3QgX19pbmplY3RlZF9pbXBvcnRfbWV0YV91cmxfXyA9IFwiZmlsZTovLy9Vc2Vycy9qdWFucC5wcmlldG8vZ2l0aHViLmNvbS9TaG9waWZ5L2h5ZHJvZ2VuL3BhY2thZ2VzL2NsaS9zcmMvbGliL3Byb2Nlc3MudHNcIjtpbXBvcnQge2V4ZWN9IGZyb20gJ25vZGU6Y2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnbm9kZTp1dGlsJztcblxuZXhwb3J0IGNvbnN0IGV4ZWNBc3luYyA9IHByb21pc2lmeShleGVjKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHN1cHJlc3NOb2RlRXhwZXJpbWVudGFsV2FybmluZ3MoKSB7XG4gIGNvbnN0IHdhcm5pbmdMaXN0ZW5lciA9IHByb2Nlc3MubGlzdGVuZXJzKCd3YXJuaW5nJylbMF0hO1xuICBpZiAod2FybmluZ0xpc3RlbmVyKSB7XG4gICAgcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3dhcm5pbmcnKTtcbiAgICBwcm9jZXNzLnByZXBlbmRMaXN0ZW5lcignd2FybmluZycsICh3YXJuaW5nKSA9PiB7XG4gICAgICBpZiAod2FybmluZy5uYW1lICE9ICdFeHBlcmltZW50YWxXYXJuaW5nJykge1xuICAgICAgICB3YXJuaW5nTGlzdGVuZXIod2FybmluZyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsICJjb25zdCBfX2luamVjdGVkX2ZpbGVuYW1lX18gPSBcIi9Vc2Vycy9qdWFucC5wcmlldG8vZ2l0aHViLmNvbS9TaG9waWZ5L2h5ZHJvZ2VuL3BhY2thZ2VzL2NsaS9zcmMvbGliL2J1aWxkLnRzXCI7Y29uc3QgX19pbmplY3RlZF9kaXJuYW1lX18gPSBcIi9Vc2Vycy9qdWFucC5wcmlldG8vZ2l0aHViLmNvbS9TaG9waWZ5L2h5ZHJvZ2VuL3BhY2thZ2VzL2NsaS9zcmMvbGliXCI7Y29uc3QgX19pbmplY3RlZF9pbXBvcnRfbWV0YV91cmxfXyA9IFwiZmlsZTovLy9Vc2Vycy9qdWFucC5wcmlldG8vZ2l0aHViLmNvbS9TaG9waWZ5L2h5ZHJvZ2VuL3BhY2thZ2VzL2NsaS9zcmMvbGliL2J1aWxkLnRzXCI7aW1wb3J0IHtmaWxlVVJMVG9QYXRofSBmcm9tICdub2RlOnVybCc7XG5pbXBvcnQge2ZpbmRQYXRoVXB9IGZyb20gJ0BzaG9waWZ5L2NsaS1raXQvbm9kZS9mcyc7XG5pbXBvcnQge0Fib3J0RXJyb3J9IGZyb20gJ0BzaG9waWZ5L2NsaS1raXQvbm9kZS9lcnJvcic7XG5pbXBvcnQge2Rpcm5hbWUsIGpvaW5QYXRofSBmcm9tICdAc2hvcGlmeS9jbGkta2l0L25vZGUvcGF0aCc7XG5pbXBvcnQge2V4ZWNBc3luY30gZnJvbSAnLi9wcm9jZXNzLmpzJztcblxuLy8gQXZvaWQgdXNpbmcgZmlsZVVSTFRvUGF0aCBoZXJlIHRvIHByZXZlbnQgYmFja3NsYXNoZXMgbmlnaHRtYXJlIG9uIFdpbmRvd3NcbmNvbnN0IG1vbm9yZXBvUGFja2FnZXNQYXRoID0gbmV3IFVSTCgnLi4vLi4vLi4nLCBpbXBvcnQubWV0YS51cmwpLnBhdGhuYW1lO1xuZXhwb3J0IGNvbnN0IGlzSHlkcm9nZW5Nb25vcmVwbyA9IG1vbm9yZXBvUGFja2FnZXNQYXRoLmVuZHNXaXRoKFxuICAnL2h5ZHJvZ2VuL3BhY2thZ2VzLycsXG4pO1xuZXhwb3J0IGNvbnN0IGh5ZHJvZ2VuUGFja2FnZXNQYXRoID0gaXNIeWRyb2dlbk1vbm9yZXBvXG4gID8gbW9ub3JlcG9QYWNrYWdlc1BhdGhcbiAgOiB1bmRlZmluZWQ7XG5cbi8vIFRoZSBnbG9iYWwgQ0xJIHdpbGwgbWVyZ2Ugb3VyIGFzc2V0cyB3aXRoIG90aGVyXG4vLyBwbHVnaW5zIHNvIHdlIG11c3QgbmFtZXNwYWNlIHRoZSBkaXJlY3Rvcnk6XG5leHBvcnQgY29uc3QgQVNTRVRTX0RJUl9QUkVGSVggPSAnYXNzZXRzL2h5ZHJvZ2VuJztcblxuZXhwb3J0IGNvbnN0IEFTU0VUU19TVEFSVEVSX0RJUiA9ICdzdGFydGVyJztcbmV4cG9ydCBjb25zdCBBU1NFVFNfU1RBUlRFUl9ESVJfUk9VVEVTID0gJ3JvdXRlcyc7XG5cbmV4cG9ydCB0eXBlIEFzc2V0c0RpciA9XG4gIHwgJ3RhaWx3aW5kJ1xuICB8ICd2YW5pbGxhLWV4dHJhY3QnXG4gIHwgJ3ZpdGUnXG4gIHwgJ2kxOG4nXG4gIHwgJ3JvdXRlcydcbiAgfCAnYnVuZGxlJ1xuICAvLyBUaGVzZSBhcmUgY3JlYXRlZCBhdCBidWlsZCB0aW1lOlxuICB8ICd2aXJ0dWFsLXJvdXRlcydcbiAgfCAnaW50ZXJuYWwtdGVtcGxhdGVzJ1xuICB8ICdleHRlcm5hbC10ZW1wbGF0ZXMnXG4gIHwgdHlwZW9mIEFTU0VUU19TVEFSVEVSX0RJUjtcblxubGV0IHBrZ0pzb25QYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGtnSnNvblBhdGgoKSB7XG4gIHBrZ0pzb25QYXRoID8/PSBhd2FpdCBmaW5kUGF0aFVwKCdwYWNrYWdlLmpzb24nLCB7XG4gICAgY3dkOiBmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCksXG4gICAgdHlwZTogJ2ZpbGUnLFxuICB9KTtcblxuICBpZiAoIXBrZ0pzb25QYXRoKSB7XG4gICAgdGhyb3cgbmV3IEFib3J0RXJyb3IoXG4gICAgICAnQ291bGQgbm90IGZpbmQgYXNzZXRzIGRpcmVjdG9yeScsXG4gICAgICAnUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLicsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBwa2dKc29uUGF0aDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFzc2V0c0RpcihmZWF0dXJlPzogQXNzZXRzRGlyLCAuLi5zdWJwYXRoczogc3RyaW5nW10pIHtcbiAgcmV0dXJuIGpvaW5QYXRoKFxuICAgIGRpcm5hbWUoYXdhaXQgZ2V0UGtnSnNvblBhdGgoKSksXG4gICAgcHJvY2Vzcy5lbnYuU0hPUElGWV9VTklUX1RFU1RcbiAgICAgID8gYGFzc2V0c2AgLy8gVXNlIHNvdXJjZSBmb3IgdW5pdCB0ZXN0c1xuICAgICAgOiBgZGlzdC8ke0FTU0VUU19ESVJfUFJFRklYfWAsXG4gICAgZmVhdHVyZSA/PyAnJyxcbiAgICAuLi5zdWJwYXRocyxcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRlbXBsYXRlQXBwRmlsZShmaWxlcGF0aDogc3RyaW5nLCByb290Pzogc3RyaW5nKSB7XG4gIHJvb3QgPz89IGF3YWl0IGdldFN0YXJ0ZXJEaXIoKTtcblxuICBjb25zdCB1cmwgPSBuZXcgVVJMKFxuICAgIGAke3Jvb3R9L2FwcCR7ZmlsZXBhdGggPyBgLyR7ZmlsZXBhdGh9YCA6ICcnfWAsXG4gICAgaW1wb3J0Lm1ldGEudXJsLFxuICApO1xuICByZXR1cm4gdXJsLnByb3RvY29sID09PSAnZmlsZTonID8gZmlsZVVSTFRvUGF0aCh1cmwpIDogdXJsLnRvU3RyaW5nKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGFydGVyRGlyKHVzZVNvdXJjZSA9ICEhcHJvY2Vzcy5lbnYuU0hPUElGWV9VTklUX1RFU1QpIHtcbiAgaWYgKHVzZVNvdXJjZSkgcmV0dXJuIGdldFNrZWxldG9uU291cmNlRGlyKCk7XG5cbiAgcmV0dXJuIGdldEFzc2V0c0RpcihBU1NFVFNfU1RBUlRFUl9ESVIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2tlbGV0b25Tb3VyY2VEaXIoKSB7XG4gIGlmICghaXNIeWRyb2dlbk1vbm9yZXBvKSB7XG4gICAgdGhyb3cgbmV3IEFib3J0RXJyb3IoXG4gICAgICAnVHJ5aW5nIHRvIHVzZSBza2VsZXRvbiBzb3VyY2UgZGlyIG91dHNpZGUgb2YgSHlkcm9nZW4gbW9ub3JlcG8uJyxcbiAgICAgICdQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuJyxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGpvaW5QYXRoKGRpcm5hbWUobW9ub3JlcG9QYWNrYWdlc1BhdGgpLCAndGVtcGxhdGVzJywgJ3NrZWxldG9uJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTa2VsZXRvbk5vZGVNb2R1bGVzKCk6IHN0cmluZyB7XG4gIHJldHVybiBqb2luUGF0aChnZXRTa2VsZXRvblNvdXJjZURpcigpLCAnbm9kZV9tb2R1bGVzJyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZXBvTm9kZU1vZHVsZXMoKSB7XG4gIGNvbnN0IHtzdGRvdXR9ID0gYXdhaXQgZXhlY0FzeW5jKCducG0gcm9vdCcpO1xuICBsZXQgbm9kZU1vZHVsZXNQYXRoID0gc3Rkb3V0LnRyaW0oKTtcblxuICBpZiAoIW5vZGVNb2R1bGVzUGF0aCAmJiBpc0h5ZHJvZ2VuTW9ub3JlcG8pIHtcbiAgICBub2RlTW9kdWxlc1BhdGggPSBqb2luUGF0aChkaXJuYW1lKG1vbm9yZXBvUGFja2FnZXNQYXRoKSwgJ25vZGVfbW9kdWxlcycpO1xuICB9XG5cbiAgcmV0dXJuIG5vZGVNb2R1bGVzUGF0aDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBa1UsT0FBTyxVQUFVO0FBQ25WLFNBQVEsY0FBYTtBQUNyQixTQUFRLE1BQU0sWUFBVztBQUN6QixTQUFRLG9CQUFtQjs7O0FDSHVULFNBQVEsWUFBVztBQUNyVyxTQUFRLGlCQUFnQjtBQUVqQixJQUFNLFlBQVksVUFBVSxJQUFJOzs7QUNIdVMsU0FBUSxxQkFBb0I7QUFDMVcsU0FBUSxrQkFBaUI7QUFDekIsU0FBUSxrQkFBaUI7QUFDekIsU0FBUSxTQUFTLGdCQUFlO0FBSGtMLElBQU0sK0JBQStCO0FBT3ZQLElBQU0sdUJBQXVCLElBQUksSUFBSSxZQUFZLDRCQUFlLEVBQUU7QUFDM0QsSUFBTSxxQkFBcUIscUJBQXFCO0FBQUEsRUFDckQ7QUFDRjtBQU9PLElBQU0sb0JBQW9CO0FBRTFCLElBQU0scUJBQXFCO0FBNEQzQixTQUFTLHVCQUF1QjtBQUNyQyxNQUFJLENBQUMsb0JBQW9CO0FBQ3ZCLFVBQU0sSUFBSTtBQUFBLE1BQ1I7QUFBQSxNQUNBO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFFQSxTQUFPLFNBQVMsUUFBUSxvQkFBb0IsR0FBRyxhQUFhLFVBQVU7QUFDeEU7OztBRjVFQSxPQUFPLFVBQVUsRUFBQyxXQUFXLE1BQU0sT0FBTyxLQUFJLENBQUM7QUFFL0MsSUFBTSxlQUFlLGFBQWE7QUFBQSxFQUNoQyxRQUFRO0FBQUEsRUFDUixRQUFRO0FBQUEsRUFDUixRQUFRO0FBQUEsRUFDUixXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxPQUFPO0FBQUE7QUFDVCxDQUFDO0FBRUQsSUFBTSxTQUFTO0FBRWYsSUFBTyxzQkFBUSxhQUFhO0FBQUEsRUFDMUI7QUFBQSxJQUNFLEdBQUc7QUFBQSxJQUNILE9BQU8sQ0FBQyxlQUFlLG1CQUFtQjtBQUFBLElBQzFDO0FBQUE7QUFBQSxJQUVBLEtBQUssRUFBQyxPQUFPLENBQUMsZ0JBQWdCLCtCQUErQixFQUFDO0FBQUEsSUFDOUQsTUFBTSxZQUFZO0FBRWhCLFlBQU0sS0FBSyxLQUFLLFFBQVEsUUFBUSxHQUFHLEtBQUssS0FBSyxRQUFRLGlCQUFpQixHQUFHO0FBQUEsUUFDdkUsV0FBVztBQUFBLFFBQ1gsT0FBTztBQUFBLE1BQ1QsQ0FBQztBQUlELFlBQU0sZ0JBQWdCLEtBQUs7QUFBQSxRQUN6QjtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsTUFDRjtBQUVBLFlBQU0sS0FBSyxxQkFBcUIsR0FBRyxlQUFlO0FBQUEsUUFDaEQsT0FBTztBQUFBLFFBQ1AsV0FBVztBQUFBLFFBQ1gsUUFBUSxDQUFDLGFBQ1AsQ0FBQyxzREFBc0QsS0FBSyxRQUFRO0FBQUEsTUFDeEUsQ0FBQztBQUVELGNBQVE7QUFBQSxRQUNOO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxNQUNGO0FBRUEsY0FBUSxJQUFJLE1BQU0sOEJBQThCO0FBQ2hELFlBQU0sVUFBVSxzQ0FBc0M7QUFDdEQsY0FBUSxJQUFJLElBQUksNkJBQTZCO0FBQUEsSUFDL0M7QUFBQSxFQUNGO0FBQUEsRUFDQTtBQUFBLElBQ0UsR0FBRztBQUFBO0FBQUEsSUFFSCxPQUFPLENBQUMsOENBQThDO0FBQUEsSUFDdEQsUUFBUSxHQUFHLE1BQU0sSUFBSSxpQkFBaUI7QUFBQSxJQUN0QyxjQUFjLE9BQU8sRUFBQyxJQUFJLE9BQU07QUFBQSxJQUNoQyxLQUFLO0FBQUEsSUFDTCxNQUFNLFlBQVk7QUFHaEIsWUFBTTtBQUFBLFFBQ0o7QUFBQSxRQUNBLEdBQUcsTUFBTSxJQUFJLGlCQUFpQjtBQUFBLFFBQzlCLEVBQUMsV0FBVyxNQUFNLE9BQU8sS0FBSTtBQUFBLE1BQy9CO0FBRUEsY0FBUSxJQUFJLE1BQU0sa0RBQWtELElBQUk7QUFBQSxJQUMxRTtBQUFBLEVBQ0Y7QUFDRixDQUFDOyIsCiAgIm5hbWVzIjogW10KfQo=
